<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SVT Dream Bank 2026</title>
    <style>
        :root { --rose: #F7CAC9; --serenity: #92A8D1; --purple: #9b59b6; }
        * { box-sizing: border-box; }
        body { font-family: -apple-system, sans-serif; background: #fdfbfb; margin: 0; padding-bottom: 120px; }
        .header-fixed { position: sticky; top: 0; z-index: 999; background: linear-gradient(to right, var(--rose), var(--serenity)); color: white; padding: 15px; text-align: center; }
        .total-box { background: white; padding: 15px; margin: 10px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 2px solid var(--rose); }
        #dateInput { border: 1px solid #ddd; padding: 5px; border-radius: 5px; font-size: 16px; }
        .total-amount { color: #e84393; font-size: 24px; font-weight: bold; }
        .member-card { background: white; margin: 10px; padding: 15px; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .member-name { font-size: 18px; font-weight: bold; margin-bottom: 12px; color: #333; }
        .btn-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        button { padding: 10px 5px; background: #fff; border: 1px solid #ddd; border-radius: 8px; font-size: 12px; color: #555; cursor: pointer; -webkit-appearance: none; }
        .btn-live { background-color: #fff9db; border-color: #f1c40f; color: #d35400; font-weight: bold; }
        .btn-photo { background-color: #f5f6fa; border-color: var(--purple); color: var(--purple); font-weight: bold; }
        .log-area { margin: 10px; background: #f8f9fa; padding: 15px; border-radius: 10px; }
        .log-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #ddd; font-size: 14px; }
        .footer { position: fixed; bottom: 0; width: 100%; background: rgba(255,255,255,0.9); padding: 20px; text-align: center; border-top: 1px solid #eee; backdrop-filter: blur(5px); }
        .next-btn { background: var(--rose); color: white; border: none; padding: 12px 30px; border-radius: 25px; width: 85%; font-size: 16px; font-weight: bold; }
    </style>
</head>
<body>

<div class="header-fixed"><h1>üíé 2026 SVT Dream Bank</h1></div>
<div class="total-box">
    <input type="date" id="dateInput" onchange="updateDate()">
    <div class="total-amount">NT$ <span id="totalDisplay">0</span></div>
</div>
<div id="memberList"></div>
<div class="log-area"><div style="font-weight:bold;margin-bottom:10px;">üìã Áï∂Êó•ÊòéÁ¥∞</div><div id="logList"></div></div>
<div class="footer"><button class="next-btn" onclick="nextDay()">‚úÖ ‰∏ã‰∏ÄÂ§©</button></div>

<script>
    const prices = {
        wonwoo: { w_p: 100, w_m: 50, w_s: 100, w_l: 500, i_p: 100, i_s: 100, i_photo: 100, i_live: 500 },
        others: { w_p: 50, w_m: 10, w_s: 20, w_l: 100, i_p: 50, i_s: 20, i_live: 100 }
    };
    const members = [
        {en:"S.coups", ko:"ÏäπÏ≤†", vip:false}, {en:"Jeonghan", ko:"Ï†ïÌïú", vip:false},
        {en:"Joshua", ko:"ÏßÄÏàò", vip:false}, {en:"Jun", ko:"Ï§ÄÌúò", vip:false},
        {en:"Hoshi", ko:"ÏàúÏòÅ", vip:false}, {en:"Wonwoo", ko:"ÏõêÏö∞", vip:true},
        {en:"Woozi", ko:"ÏßÄÌõà", vip:false}, {en:"The8", ko:"Î™ÖÌò∏", vip:false},
        {en:"Mingyu", ko:"ÎØºÍ∑ú", vip:false}, {en:"DK", ko:"ÏÑùÊïè", vip:false},
        {en:"Seungkwan", ko:"ÏäπÍ¥Ä", vip:false}, {en:"Vernon", ko:"ÌïúÏÜî", vip:false},
        {en:"Dino", ko:"Ï∞¨", vip:false}
    ];

    function getToday() { return new Date().toISOString().split('T')[0]; }

    let state = { total: 0, currentDate: getToday(), allLogs: {} };

    function save() {
        localStorage.setItem('SVT_REAL_STORAGE_V1', JSON.stringify(state));
        updateUI();
    }

    function updateUI() {
        document.getElementById('totalDisplay').innerText = state.total.toLocaleString();
        document.getElementById('dateInput').value = state.currentDate;
        renderLogs();
    }

    function add(name, act, amt) {
        state.total += amt;
        const dk = state.currentDate;
        if (!state.allLogs[dk]) state.allLogs[dk] = [];
        state.allLogs[dk].push({ id: Date.now(), amt: amt, text: `${name} ${act}` });
        save();
    }

    function undo(id) {
        const dk = state.currentDate;
        const logs = state.allLogs[dk];
        const idx = logs.findIndex(l => l.id === id);
        if(idx !== -1) {
            state.total -= logs[idx].amt;
            logs.splice(idx, 1);
            save();
        }
    }

    function renderLogs() {
        const div = document.getElementById('logList');
        const logs = state.allLogs[state.currentDate] || [];
        if(logs.length === 0) { div.innerHTML = 'Â∞öÁÑ°Á¥ÄÈåÑ'; return; }
        div.innerHTML = logs.map(l => `<div class="log-item"><span>${l.text} ($${l.amt})</span><span style="color:red;font-weight:bold" onclick="undo(${l.id})">‚úñ</span></div>`).reverse().join('');
    }

    function handleLive(idx, plat) {
        const m = members[idx];
        const n = prompt(`${plat}‰∫∫Êï∏?`, "1");
        if(n && !isNaN(n)) {
            let base = (m.vip ? 500 : 100);
            let total = parseInt(base) + (parseInt(n)>1 ? (parseInt(n)-1)*50 : 0);
            add(m.en, `${plat}Áõ¥Êí≠(${n})`, total);
        }
    }

    function updateDate() { state.currentDate = document.getElementById('dateInput').value; save(); }
    function nextDay() { let d = new Date(state.currentDate); d.setDate(d.getDate()+1); state.currentDate = d.toISOString().split('T')[0]; save(); }

    function init() {
        const saved = localStorage.getItem('SVT_REAL_STORAGE_V1');
        if(saved) {
            state = JSON.parse(saved);
            state.currentDate = getToday();
        }
        const list = document.getElementById('memberList');
        members.forEach((m, i) => {
            const p = m.vip ? prices.wonwoo : prices.others;
            const card = document.createElement('div');
            card.className = 'member-card';
            let btns = `<button onclick="add('${m.en}','WVSÁôº',${p.w_p})">WVSÁôº</button><button onclick="add('${m.en}','WVSÁïô',${p.w_m})">WVSÁïô</button><button onclick="add('${m.en}','WVSÈôê',${p.w_s})">WVSÈôê</button><button class="btn-live" onclick="handleLive(${i},'WVS')">WVSÁõ¥</button><button onclick="add('${m.en}','IGÁôº',${p.i_p})">IGÁôº</button><button onclick="add('${m.en}','IGÈôê',${p.i_s})">IGÈôê</button><button class="btn-live" onclick="handleLive(${i},'IG')">IGÁõ¥</button>`;
            if(m.vip) btns += `<button class="btn-photo" onclick="add('${m.en}','IGÊîù',${p.i_photo})">IGÊîù</button>`;
            card.innerHTML = `<div class="member-name">${m.en} ${m.ko} ${m.vip?'üíú':''}</div><div class="btn-grid">${btns}</div>`;
            list.appendChild(card);
        });
        updateUI();
    }
    init();
</script>
</body>
</html>
